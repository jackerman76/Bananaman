{% extends '_base.html' %}
{% block header %}
<div class="container center">
  		<h1> Got Bananas? </h1>
</div>
{% endblock %}
{% block content %}

<div class="container">
    <form enctype="multipart/form-data" action="" onsubmit="getLocationConstant()">
      <section>
          <div class="form-group">
            <label for="quantity"><b>Quantity</b></label><br>
            <input type="number" class="form-control" placeholder="How many bananas do you have?" name="quantity" required>
            <br>
          </div>

          <div class="form-group">
            <label for="file"><b>Picture</b></label><br>
            <input type="file" class="form-control" placeholder="Upload a picture of your bananas!" name="file" accept="image/png, image/jpeg" required>
            <br>
          </div>

          <div class="form-group">
            <label for="description"><b>Additonal Information</b></label><br>
            <textarea class="form-control" rows="3" placeholder="Tell us a bit about your bananas." name="description" required></textarea>
            <br>
          </div>

          <div class="form-group">
            <button type="submit" value="True" name="request_bananas" formmethod="POST" class="btn btn-primary" >Submit Request</button>
            <br>
          </div>

      </section>
    </form>
    <br>
</div>

<script type="text/javascript">

  function getLocationConstant() {

          const message = document.querySelector('#message');

          if (navigator.geolocation) {
              navigator.geolocation.getCurrentPosition(onGeoSuccess, onGeoError);
          } else {
            message.textContent = `Your browser doesn't support Geolocation`;
            message.classList.add('error');
            return;
          }
      }

      // If we have a successful location update
      function onGeoSuccess(event) {
          document.getElementById("Latitude").value = event.coords.latitude;
          document.getElementById("Longitude").value = event.coords.longitude;
          document.getElementById("Position1").value = event.coords.latitude + ", " + event.coords.longitude;
          message.classList.add('success');
          message.textContent = `Your location: (${latitude},${longitude})`;

      }

      // If something has gone wrong with the geolocation request
      function onGeoError(event) {
          message.classList.add('error');
          message.textContent = `Failed to get your location!`;
      }


</script>
{% endblock %}
